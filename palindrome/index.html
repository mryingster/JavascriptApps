<html>
  <head>
    <title>Palindrome Finder</title>
    <style>
      body {
          max-width: 650px;
          margin: auto;
          padding-top: 50px;
          font-family: sans-serif;
          line-height: 1.5em;
          background: linear-gradient(0deg,rgb(255, 255, 255) 0%, rgb(240, 240, 240) 95%, rgb(180, 180, 180) 100%) top no-repeat;
      }
      #results {
          column-count: 5;
      }
    </style>
  </head>
  <body>
    <h1>Palindrome Finder</h1>
    <p>This was an exercise I saw a candidate have to solve in a job interview, and wanted to make my own solution. This represents what I think a reasonable solution to create, given a short time constraint. I limited my time spent on this to only a few minutes, aside from a little extra time making the icon and come minimal CSS.</p>
    <h2>Settings</h2>
    <input type="checkbox" id="ignorespaces" name="ignorespaces" value="ignorespaces" checked>
    <label for="ignorespaces">Don't include spaces in palindrome solutions</label>
    <br>
    <input type="checkbox" id="ignorepunctuation" name="ignorepunctuation" value="ignorepunctuation" checked>
    <label for="ignorepunctuation">Don't include punctuation in palindrome solutions</label>
    <br>
    <input type="checkbox" id="ignorecase" name="ignorecase" value="ignorecase" checked>
    <label for="ignorecase">Don't consider case in palindrome solutions</label>

    <h2>Input</h2>
    <textarea id="text_input" rows="10" cols="80">Amid the calm of noon, a lone owl flew level over a poplar grove, its wings slicing the still air like a radar. The bird, a civic symbol of wisdom, landed near a kayak by the river, where it watched a rotator spin in the breeze. Nearby, a small finch chirped “wow,” as if in awe of the radar’s motion. Even in the forest's hush, nature spoke in quiet palindromes—echoes of life, mirrored in sound and flight.</textarea>

    <p>
      <button id="run">Find Palindromes</button>
    </p>

    <h2>Palindromes Found</h2>
    <ul id="results">
    </ul>

  </body>
  <script>

    function find_palindromes() {
        let palindromes = [];
        let input = document.getElementById("text_input").value;
        let ignore_spaces = document.getElementById("ignorespaces").checked;
        let ignore_punctuation = document.getElementById("ignorepunctuation").checked;
        let ignore_case = document.getElementById("ignorecase").checked;

        if (ignore_case)
            input = input.toLowerCase();

        if (ignore_spaces)
            input = input.replaceAll(" ", "");
        else
            input = input.replaceAll(" ", "_");

        if (ignore_punctuation)
            for (let c of ["'", '"', ".", ","])
                input = input.replaceAll(c, "")

        // Go through each letter
        for (let i=1; i<input.length-1; i++) {
            let b = i-1; // Index before
            let a = i+1; // Index after

            // In even lettered palindrome case, we will advance the after forward 1
            if (input[i] == input[a] && input[i] != input[i-1])
                a++;

            // expand outward and see if it is a palindrome
            while (input[b] == input[a]) {
                b--;
                a++;
            }

            if (a - b > 2) {
                palindromes.push(input.slice(b+1, a));
            }
        }

        display_palindromes(palindromes);
        return;
    }

    function display_palindromes(p) {
        // Sort array by length
        p.sort((a, b) => b.length - a.length);

        let list = document.getElementById("results");
        list.innerHTML = "";

        for (let palindrome of p) {
            let item = document.createElement("li")
            item.innerHTML = palindrome;
            list.appendChild(item);
        }

        return;
    }

    document.getElementById("text_input").onchange = function () { find_palindromes() };
    document.getElementById("run").onclick = function() {find_palindromes() };
  </script>
</html>
